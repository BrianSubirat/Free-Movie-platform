<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamFlix</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #0a0a0a;
            color: #ffffff;
            overflow-x: hidden;
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #000000;
            border-bottom: 1px solid #1a1a1a;
            z-index: 1000;
            padding: 0;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            height: 60px;
        }

        .nav-logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-logo img {
            height: 160px;
            width: auto;
            object-fit: contain;
        }

        @media (max-width: 768px) {
            .nav-logo h1 {
                display: none;
            }
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .nav-link {
            color: #ffffff;
            text-decoration: none;
            font-size: 0.95rem;
            font-weight: 500;
            padding: 0.5rem 0;
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .nav-link:hover {
            color: #007bff;
        }

        .nav-dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-trigger {
            cursor: pointer;
        }

        .dropdown-content {
            position: absolute;
            top: 100%;
            left: 0;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            min-width: 180px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .dropdown-content.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-content a {
            display: block;
            color: #ffffff;
            text-decoration: none;
            padding: 0.75rem 1rem;
            font-size: 0.9rem;
            transition: background-color 0.3s ease;
            border-bottom: 1px solid #333;
        }

        .dropdown-content a:last-child {
            border-bottom: none;
        }

        .dropdown-content a:hover {
            background-color: #333;
            color: #007bff;
        }

        .account-dropdown {
            right: 0;
            left: auto;
            min-width: 200px;
        }

        .account-dropdown a {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .search-btn, .profile-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: #1a1a1a;
            border: 1px solid #333;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .search-btn:hover, .profile-icon:hover {
            background: #333;
            border-color: #007bff;
        }

        .search-overlay {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #000000;
            border-bottom: 1px solid #1a1a1a;
            padding: 1rem 2rem;
            transform: translateY(-100%);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .search-overlay.active {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }

        .search-container {
            display: flex;
            align-items: center;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
        }

        .search-container input {
            flex: 1;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 0.75rem 1.5rem;
            color: white;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .search-container input:focus {
            border-color: #007bff;
        }

        .search-close {
            position: absolute;
            right: 10px;
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 0.5rem;
        }

        /* Search Suggestions */
        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            max-height: 400px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            margin-top: 0.5rem;
        }

        .suggestion-item {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            cursor: pointer;
            border-bottom: 1px solid #333;
            transition: background-color 0.3s ease;
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .suggestion-item:hover {
            background-color: #333;
        }

        .suggestion-item img {
            width: 50px;
            height: 75px;
            object-fit: cover;
            border-radius: 4px;
            margin-right: 1rem;
            flex-shrink: 0;
        }

        .suggestion-info {
            flex: 1;
            min-width: 0;
        }

        .suggestion-title {
            font-size: 0.95rem;
            font-weight: 500;
            color: #ffffff;
            margin-bottom: 0.25rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .suggestion-meta {
            font-size: 0.8rem;
            color: #999;
        }

        /* Main Content */
        .main-content {
            margin-top: 60px;
        }

        /* Hero Section */
        .hero-section {
            position: relative;
            height: 60vh;
            min-height: 400px;
            overflow: hidden;
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
        }

        .hero-carousel {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hero-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease;
            display: flex;
            align-items: center;
            padding: 0 4rem;
            cursor: pointer;
        }

        .hero-slide.active {
            opacity: 1;
        }

        .hero-slide img {
            width: 300px;
            height: 450px;
            object-fit: cover;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .hero-content {
            margin-left: 3rem;
            max-width: 500px;
        }

        .hero-content h2 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #ffffff;
        }

        .hero-content p {
            font-size: 1.2rem;
            opacity: 0.8;
            line-height: 1.6;
            color: #cccccc;
        }

        /* Content Sections */
        .content-section {
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .content-section h2 {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #ffffff;
        }

        .movie-row {
            display: flex;
            gap: 1.5rem;
            overflow-x: auto;
            padding-bottom: 1rem;
            scroll-behavior: smooth;
        }

        .movie-row::-webkit-scrollbar {
            height: 8px;
        }

        .movie-row::-webkit-scrollbar-track {
            background: #1a1a1a;
            border-radius: 4px;
        }

        .movie-row::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }

        .movie-card {
            flex: 0 0 160px;
            background: #1a1a1a;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            border: 1px solid transparent;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .movie-card:hover {
            transform: scale(1.05);
            border-color: #ffffff;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.6);
            z-index: 10;
        }

        .movie-poster {
            position: relative;
            width: 100%;
            height: 240px;
            overflow: hidden;
        }

        .movie-poster img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .movie-card:hover .movie-poster img {
            transform: scale(1.1);
        }

        .movie-info {
            padding: 0.75rem;
            background: linear-gradient(180deg, #1a1a1a 0%, #0f0f0f 100%);
        }

        .movie-title {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #ffffff;
            line-height: 1.2;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .movie-meta {
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }

        .rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .stars {
            display: flex;
            gap: 1px;
        }

        .star {
            color: #ffd700;
            font-size: 0.8rem;
        }

        .rating-text {
            font-size: 0.85rem;
            color: #cccccc;
            font-weight: 500;
        }

        .views {
            font-size: 0.8rem;
            color: #999999;
        }

        /* Movie card hover overlay */
        .movie-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                180deg,
                transparent 0%,
                transparent 60%,
                rgba(0, 0, 0, 0.8) 100%
            );
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .movie-card:hover::after {
            opacity: 1;
        }

        /* Play button overlay */
        .movie-card:hover .movie-poster::before {
            content: '\f04b';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 2rem;
            z-index: 5;
            opacity: 0;
            animation: fadeInPlay 0.3s ease forwards;
        }

        @keyframes fadeInPlay {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Movie Detail Modal Mobile Optimization */
        .movie-detail-fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #000000;
            overflow-y: auto;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            z-index: 2000;
        }

        .modal-overlay.active .movie-detail-fullscreen {
            transform: translateY(0);
        }

        .movie-hero {
            position: relative;
            height: 50vh;
            min-height: 350px;
            overflow: hidden;
        }

        .movie-backdrop {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .movie-backdrop img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .backdrop-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                180deg,
                transparent 0%,
                rgba(0, 0, 0, 0.3) 40%,
                rgba(0, 0, 0, 0.8) 80%,
                rgba(0, 0, 0, 0.95) 100%
            );
            display: flex;
            align-items: flex-end;
            padding: 1.5rem;
        }

        .hero-content {
            display: flex;
            align-items: flex-end;
            gap: 1.5rem;
            max-width: 1200px;
            width: 100%;
        }

        .movie-poster-small {
            flex-shrink: 0;
            width: 140px;
            height: 210px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5);
        }

        .movie-poster-small img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .movie-info-hero {
            flex: 1;
            color: white;
        }

        .movie-info-hero h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            line-height: 1.1;
        }

        .movie-meta-hero {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .movie-meta-hero .year {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }

        .movie-meta-hero .rating {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .movie-meta-hero .duration {
            color: #cccccc;
            font-size: 0.95rem;
        }

        .movie-info-hero .description {
            font-size: 1rem;
            line-height: 1.5;
            color: #e0e0e0;
            margin-bottom: 1.5rem;
            max-width: 500px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .main-actions {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .play-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: #007bff;
            border: none;
            border-radius: 6px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(0, 123, 255, 0.3);
            min-height: 48px;
        }

        .play-button:hover {
            background: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 123, 255, 0.4);
        }

        .trailer-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            min-height: 48px;
        }

        .trailer-button:hover {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        .action-btn-round {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            min-width: 44px;
        }

        .action-btn-round:hover {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        .action-btn-round.active {
            background: #007bff;
            border-color: #007bff;
            color: white;
        }

        .movie-detail-sections {
            padding: 2rem 1.5rem;
            background: #0a0a0a;
        }

        .detail-section {
            margin-bottom: 2.5rem;
        }

        .detail-section h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: white;
        }

        .season-selector {
            margin-bottom: 2rem;
        }

        .season-selector select {
            background: #1a1a1a;
            border: 2px solid #333;
            border-radius: 8px;
            color: white;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            min-width: 150px;
            cursor: pointer;
        }

        .season-selector select:focus {
            outline: none;
            border-color: #007bff;
        }

        .episodes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
        }

        .episode-card {
            background: #1a1a1a;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .episode-card:hover {
            transform: translateY(-4px);
            border-color: #007bff;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
        }

        .episode-thumbnail {
            position: relative;
            width: 100%;
            height: 180px;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .episode-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .episode-play-btn {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(0, 123, 255, 0.9);
            border: none;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .episode-card:hover .episode-play-btn {
            opacity: 1;
        }

        .episode-info {
            padding: 1.5rem;
        }

        .episode-number {
            color: #007bff;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .episode-title {
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            line-height: 1.3;
        }

        .episode-description {
            color: #cccccc;
            font-size: 0.9rem;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .episode-duration {
            color: #999;
            font-size: 0.8rem;
            margin-top: 0.75rem;
        }

        .similar-movies {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .similar-movie-card {
            background: #1a1a1a;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .similar-movie-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
        }

        .similar-movie-poster {
            width: 100%;
            height: 280px;
            position: relative;
        }

        .similar-movie-poster img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .similar-movie-info {
            padding: 1rem;
        }

        .similar-movie-title {
            color: white;
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            line-height: 1.3;
        }

        .similar-movie-meta {
            color: #999;
            font-size: 0.85rem;
        }

        .movie-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .detail-item {
            display: flex;
            padding: 1rem 0;
            border-bottom: 1px solid #333;
        }

        .detail-label {
            color: #999;
            font-weight: 600;
            min-width: 100px;
            margin-right: 1rem;
        }

        .detail-value {
            color: white;
            flex: 1;
        }

        /* Page Overlay Styles */
        .page-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #0a0a0a;
            z-index: 2500;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            overflow-y: auto;
        }

        .page-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .page-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
            min-height: 100vh;
        }

        .page-header {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
            padding-top: 60px;
        }

        .page-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #ffffff;
            margin: 0;
        }

        .page-content {
            width: 100%;
        }

        .movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 1.5rem;
            padding: 1rem 0;
        }

        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: #cccccc;
        }

        .empty-state i {
            font-size: 4rem;
            color: #666;
            margin-bottom: 1rem;
            display: block;
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #ffffff;
        }

        .empty-state p {
            font-size: 1rem;
            opacity: 0.8;
            max-width: 400px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Grid Movie Card Styles */
        .movies-grid .movie-card {
            flex: none;
            width: 100%;
        }

        .movies-grid .movie-card .movie-info {
            padding: 1rem;
        }

        .movies-grid .movie-card .movie-title {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* Mobile Responsive for Pages */
        @media (max-width: 768px) {
            .page-container {
                padding: 1rem;
            }
            
            .page-header {
                padding-top: 60px;
            }
            
            .page-header h1 {
                font-size: 2rem;
            }
            
            .movies-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
                gap: 1rem;
            }
            
            .empty-state {
                padding: 2rem 1rem;
            }
            
            .empty-state i {
                font-size: 3rem;
            }
            
            .empty-state h3 {
                font-size: 1.3rem;
            }
        }

        @media (max-width: 480px) {
            .movies-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-container {
                padding: 0 1rem;
                height: 56px;
            }

            .nav-menu {
                gap: 0.75rem;
            }

            .nav-link {
                font-size: 0.85rem;
                padding: 0.75rem 0;
            }

            .nav-actions {
                gap: 0.75rem;
            }

            .search-btn, .profile-icon {
                width: 36px;
                height: 36px;
                font-size: 0.9rem;
            }

            .search-overlay {
                padding: 0.75rem 1rem;
            }

            .hero-slide {
                flex-direction: column;
                text-align: center;
                padding: 1.5rem 1rem;
                justify-content: center;
            }

            .hero-slide img {
                width: 180px;
                height: 270px;
                margin-bottom: 1.5rem;
            }

            .hero-content {
                margin-left: 0;
                max-width: 100%;
            }

            .hero-content h2 {
                font-size: 2rem;
                margin-bottom: 0.75rem;
            }

            .hero-content p {
                font-size: 1rem;
                line-height: 1.5;
                margin-bottom: 1rem;
            }

            .content-section {
                padding: 1.5rem 1rem;
            }

            .content-section h2 {
                font-size: 1.5rem;
                margin-bottom: 1rem;
            }

            .movie-card {
                flex: 0 0 140px;
                min-height: 240px;
            }

            .movie-poster {
                height: 200px;
            }

            .movie-info {
                padding: 0.75rem;
            }

            .movie-title {
                font-size: 0.9rem;
                line-height: 1.3;
                margin-bottom: 0.5rem;
            }

            .movie-meta {
                gap: 0.25rem;
            }

            .rating {
                gap: 0.25rem;
            }

            .stars {
                gap: 1px;
            }

            .star {
                font-size: 0.7rem;
            }

            .rating-text, .views {
                font-size: 0.75rem;
            }

            .movie-detail-content {
                flex-direction: column;
                min-height: auto;
            }

            .movie-detail .movie-poster {
                width: 100%;
                height: 300px;
                min-height: auto;
            }

            .movie-info {
                padding: 1.5rem;
            }

            .movie-info h1 {
                font-size: 1.8rem;
                line-height: 1.2;
                margin-bottom: 0.75rem;
            }

            .movie-meta {
                flex-wrap: wrap;
                gap: 0.75rem;
                margin-bottom: 1rem;
            }

            .description {
                font-size: 1rem;
                line-height: 1.6;
                margin-bottom: 1.5rem;
            }

            .action-buttons {
                flex-direction: column;
                gap: 0.75rem;
            }

            .action-btn {
                justify-content: center;
                padding: 0.875rem 1.25rem;
                font-size: 0.9rem;
                min-height: 48px;
            }

            .embed-controls {
                padding: 1rem;
                margin-bottom: 1rem;
            }

            .embed-source-group select {
                padding: 0.75rem;
                font-size: 0.9rem;
                min-height: 48px;
            }

            .season-episode-controls {
                flex-direction: column;
                gap: 0.75rem;
            }
            
            .season-episode-controls input {
                padding: 0.75rem;
                font-size: 0.9rem;
                min-height: 48px;
            }

            .back-btn {
                top: 1rem;
                left: 1rem;
                width: 44px;
                height: 44px;
                font-size: 1.1rem;
            }

            .close-btn {
                top: 1rem;
                right: 1rem;
                width: 44px;
                height: 44px;
                font-size: 1.1rem;
            }

            .play-btn {
                width: 70px;
                height: 70px;
                font-size: 1.75rem;
            }

            .custom-controls {
                padding: 1rem;
            }

            .control-bar {
                flex-wrap: wrap;
                gap: 0.75rem;
            }

            .control-btn {
                width: 44px;
                height: 44px;
                font-size: 1rem;
            }

            .volume-container {
                order: 1;
                width: 100%;
                justify-content: center;
                margin-top: 0.5rem;
            }

            .volume-slider {
                flex: 1;
                max-width: 150px;
            }

            .search-suggestions {
                max-height: 250px;
                margin-top: 0.25rem;
            }
            
            .suggestion-item {
                padding: 0.75rem;
                min-height: 64px;
            }
            
            .suggestion-item img {
                width: 40px;
                height: 60px;
                margin-right: 0.75rem;
            }

            .suggestion-title {
                font-size: 0.9rem;
                margin-bottom: 0.125rem;
            }

            .suggestion-meta {
                font-size: 0.75rem;
            }

            .dropdown-content {
                position: fixed;
                top: 56px;
                left: 0.5rem;
                right: 0.5rem;
                width: auto;
                min-width: auto;
                max-height: 300px;
                overflow-y: auto;
            }

            .dropdown-content a {
                padding: 1rem;
                font-size: 0.9rem;
                min-height: 48px;
                display: flex;
                align-items: center;
            }
            
            .main-content {
                margin-top: 56px;
            }
            
            .hero-section {
                height: 50vh;
                min-height: 320px;
            }
        }

        @media (max-width: 480px) {
            .nav-container {
                height: 52px;
            }

            .nav-menu {
                gap: 0.5rem;
            }

            .nav-link {
                font-size: 0.8rem;
                padding: 0.5rem 0;
            }

            .search-btn, .profile-icon {
                width: 32px;
                height: 32px;
                font-size: 0.8rem;
            }

            .movie-card {
                flex: 0 0 120px;
                min-height: 200px;
            }

            .movie-poster {
                height: 160px;
            }

            .movie-info {
                padding: 0.5rem;
            }

            .movie-title {
                font-size: 0.85rem;
                line-height: 1.2;
                margin-bottom: 0.25rem;
            }

            .hero-section {
                height: 45vh;
                min-height: 280px;
            }

            .hero-slide {
                padding: 1rem 0.75rem;
            }

            .hero-slide img {
                width: 150px;
                height: 225px;
                margin-bottom: 1rem;
            }

            .hero-content h2 {
                font-size: 1.6rem;
                margin-bottom: 0.5rem;
            }

            .hero-content p {
                font-size: 0.9rem;
                line-height: 1.4;
            }

            .content-section {
                padding: 1rem 0.75rem;
            }

            .content-section h2 {
                font-size: 1.3rem;
                margin-bottom: 0.75rem;
            }

            .movie-detail {
                width: 95%;
                max-height: 95vh;
            }

            .movie-info h1 {
                font-size: 1.5rem;
            }

            .description {
                font-size: 0.9rem;
            }

            .back-btn, .close-btn {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }

            .play-btn {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }

            .dropdown-content {
                top: 52px;
                left: 0.25rem;
                right: 0.25rem;
            }

            .dropdown-content a {
                padding: 0.875rem;
                font-size: 0.85rem;
            }

            .movie-info-hero .description {
                display: none;
            }
        }

        /* Touch and Accessibility Improvements */
        @media (max-width: 768px) {
            /* Improve touch targets */
            .movie-card {
                cursor: pointer;
                -webkit-tap-highlight-color: transparent;
            }

            .movie-card:active {
                transform: scale(0.98);
                transition: transform 0.1s ease;
            }

            /* Better scrolling */
            .movie-row {
                scroll-snap-type: x mandatory;
                -webkit-overflow-scrolling: touch;
            }

            .movie-card {
                scroll-snap-align: start;
            }

            /* Improve button accessibility */
            button, .action-btn, .control-btn {
                min-height: 44px;
                min-width: 44px;
            }

            /* Better form inputs */
            input, select {
                min-height: 44px;
                font-size: 16px; /* Prevents zoom on iOS */
            }

            /* Safe area for notched devices */
            .navbar {
                padding-left: env(safe-area-inset-left);
                padding-right: env(safe-area-inset-right);
            }

            .nav-container {
                padding-left: max(1rem, env(safe-area-inset-left));
                padding-right: max(1rem, env(safe-area-inset-right));
            }
        }

        /* Mobile Responsive for Movie Detail Page */
        @media (max-width: 768px) {
            /* Hide these buttons on mobile */
            .main-actions .action-btn-round,
            .trailer-button {
                display: none;
            }

            /* Keep only the play button */
            .main-actions {
                justify-content: center;
            }

            .play-button {
                padding: 1rem 2rem;
                font-size: 1.1rem;
            }

            /* Adjust modal close button */
            .close-btn {
                position: absolute;
                top: 1rem;
                right: 1rem;
                background: rgba(0, 0, 0, 0.7);
                border: none;
                color: white;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                cursor: pointer;
                font-size: 1.2rem;
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1001;
            }

            /* Make movie info text smaller */
            .movie-info-hero h1 {
                font-size: 1.8rem;
            }
            
            .movie-meta-hero {
                flex-wrap: wrap;
            }
            
            .description {
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .movie-info-hero h1 {
                font-size: 1.5rem;
            }
        }

        /* Mobile Bottom Navigation */
        .mobile-bottom-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: #000000;
            border-top: 1px solid #1a1a1a;
            z-index: 1001;
        }

        .mobile-bottom-nav ul {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            height: 100%;
        }

        .mobile-bottom-nav li {
            flex: 1;
        }

        .mobile-bottom-nav a {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #ffffff;
            text-decoration: none;
            font-size: 0.75rem;
            gap: 0.25rem;
            transition: color 0.3s ease;
        }

        .mobile-bottom-nav a:hover,
        .mobile-bottom-nav a.active {
            color: #007bff;
        }

        .mobile-bottom-nav i {
            font-size: 1.25rem;
        }

        /* Adjust main content for mobile nav */
        @media (max-width: 768px) {
            .mobile-bottom-nav {
                display: block;
            }
            
            .main-content {
                margin-bottom: 60px;
            }
            
            .page-container {
                padding-bottom: 80px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="75440224-1815-4664-a026-b9b369b608d8.png" alt="vidllo" style="height: 160px; width: auto; object-fit: contain;">
            </div>
            <div class="nav-menu">
                <a href="#" class="nav-link">Movies</a>
                <div class="nav-dropdown">
                    <a href="#" class="nav-link dropdown-trigger" id="genresDropdown">
                        Genres <i class="fas fa-chevron-down"></i>
                    </a>
                    <div class="dropdown-content" id="genresDropdownContent">
                        <a href="#" data-genre="action">Action</a>
                        <a href="#" data-genre="comedy">Comedy</a>
                        <a href="#" data-genre="drama">Drama</a>
                        <a href="#" data-genre="horror">Horror</a>
                        <a href="#" data-genre="romance">Romance</a>
                        <a href="#" data-genre="thriller">Thriller</a>
                        <a href="#" data-genre="sci-fi">Sci-Fi</a>
                        <a href="#" data-genre="documentary">Documentary</a>
                    </div>
                </div>
                <a href="#" class="nav-link" id="liveShowsLink">Live Shows</a>
            </div>
            <div class="nav-actions">
                <button class="search-btn" id="searchBtn">
                    <i class="fas fa-search"></i>
                </button>
                <div class="nav-dropdown">
                    <div class="profile-icon dropdown-trigger" id="accountDropdown">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="dropdown-content account-dropdown" id="accountDropdownContent">
                        <a href="#"><i class="fas fa-user-cog"></i> Account Settings</a>
                        <a href="#" id="myFavoritesLink"><i class="fas fa-heart"></i> My Favorites</a>
                        <a href="#" id="watchLaterLink"><i class="fas fa-bookmark"></i> Watch Later</a>
                        <a href="#" id="watchHistoryLink"><i class="fas fa-history"></i> Watch History</a>
                        <a href="#"><i class="fas fa-sign-out-alt"></i> Sign Out</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="search-overlay" id="searchOverlay">
            <div class="search-container">
                <input type="text" placeholder="Search movies and TV shows..." id="searchInput">
                <button class="search-close" id="searchClose">
                    <i class="fas fa-times"></i>
                </button>
                <div id="suggestions" class="search-suggestions"></div>
            </div>
        </div>
    </nav>

    <!-- Mobile Bottom Navigation -->
    <nav class="mobile-bottom-nav">
        <ul>
            <li>
                <a href="#" id="navHome" class="active">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="#" id="navMovies">
                    <i class="fas fa-film"></i>
                    <span>Movies</span>
                </a>
            </li>
            <li>
                <a href="#" id="navSearch">
                    <i class="fas fa-search"></i>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="#" id="navAccount">
                    <i class="fas fa-user"></i>
                    <span>Account</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Hero Section -->
        <section class="hero-section" style="display: none;">
            <div class="hero-carousel" id="heroCarousel">
                <!-- Hero slides will be populated by JavaScript -->
            </div>
        </section>

        <!-- Continue Watching Section -->
        <section class="content-section" id="continueWatchingSection" style="display: none;">
            <h2>Continue Watching</h2>
            <div class="movie-row" id="continueWatchingRow">
                <!-- Movies will be populated by JavaScript -->
            </div>
        </section>

        <!-- Movie Sections -->
        <section class="content-section">
            <h2>Trending Now</h2>
            <div class="movie-row" id="trendingRow">
                <!-- Movies will be populated by JavaScript -->
            </div>
        </section>

        <section class="content-section">
            <h2>Top Rated</h2>
            <div class="movie-row" id="topRatedRow">
                <!-- Movies will be populated by JavaScript -->
            </div>
        </section>

        <section class="content-section">
            <h2>Recently Added</h2>
            <div class="movie-row" id="recentlyAddedRow">
                <!-- Movies will be populated by JavaScript -->
            </div>
        </section>
    </main>

    <!-- Footer Section -->
    <footer class="footer">
        <div class="footer-container">
            <a href="#" class="footer-link" id="statusBtn">Status</a>
            <span class="footer-separator">|</span>
            <a href="#" class="footer-link" id="aboutBtn">About Us</a>
        </div>
    </footer>

    <!-- My Favorites Page -->
    <div class="page-overlay" id="myFavoritesPage">
        <div class="page-container">
            <div class="page-header">
                <button class="back-btn" id="favoritesBackBtn">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1>My Favorites</h1>
            </div>
            <div class="page-content">
                <div class="movies-grid" id="favoritesGrid">
                    <!-- Favorite movies will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Watch Later Page -->
    <div class="page-overlay" id="watchLaterPage">
        <div class="page-container">
            <div class="page-header">
                <button class="back-btn" id="watchLaterBackBtn">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1>Watch Later</h1>
            </div>
            <div class="page-content">
                <div class="movies-grid" id="watchLaterGrid">
                    <!-- Watch later movies will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Watch History Page -->
    <div class="page-overlay" id="watchHistoryPage">
        <div class="page-container">
            <div class="page-header">
                <button class="back-btn" id="historyBackBtn">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1>Watch History</h1>
            </div>
            <div class="page-content">
                <div class="movies-grid" id="historyGrid">
                    <!-- Watch history will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <div class="page-overlay" id="contactPage">
    </div>

    <!-- Status Page -->
    <div class="page-overlay" id="statusPage">
        <div class="page-container">
            <div class="page-header">
                <button class="back-btn" id="statusBackBtn">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1>System Status</h1>
            </div>
            <div class="page-content">
                <div class="status-overview">
                    <div class="status-summary">
                        <div class="status-indicator-large online">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h2>All Systems Operational</h2>
                        <p>All services are running smoothly with no reported issues.</p>
                    </div>
                </div>
                
                <div class="status-services">
                    <div class="service-category">
                        <h3>Core Services</h3>
                        <div class="service-grid">
                            <div class="service-item">
                                <div class="service-info">
                                    <h4><i class="fas fa-server"></i> Web Servers</h4>
                                    <p>Main application servers</p>
                                </div>
                                <div class="service-status online">
                                    <span class="status-dot"></span>
                                    <span>Operational</span>
                                </div>
                            </div>
                            
                            <div class="service-item">
                                <div class="service-info">
                                    <h4><i class="fas fa-database"></i> Database</h4>
                                    <p>Movie and user data storage</p>
                                </div>
                                <div class="service-status online">
                                    <span class="status-dot"></span>
                                    <span>Operational</span>
                                </div>
                            </div>
                            
                            <div class="service-item">
                                <div class="service-info">
                                    <h4><i class="fas fa-cloud"></i> CDN</h4>
                                    <p>Content delivery network</p>
                                </div>
                                <div class="service-status online">
                                    <span class="status-dot"></span>
                                    <span>Operational</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="service-category">
                        <h3>Streaming Services</h3>
                        <div class="service-grid">
                            <div class="service-item">
                                <div class="service-info">
                                    <h4><i class="fas fa-play-circle"></i> Video Player</h4>
                                    <p>Movie and TV show streaming</p>
                                </div>
                                <div class="service-status online">
                                    <span class="status-dot"></span>
                                    <span>Operational</span>
                                </div>
                            </div>
                            
                            <div class="service-item">
                                <div class="service-info">
                                    <h4><i class="fas fa-film"></i> Movie API</h4>
                                    <p>OMDb API integration</p>
                                </div>
                                <div class="service-status online">
                                    <span class="status-dot"></span>
                                    <span>Operational</span>
                                </div>
                            </div>
                            
                            <div class="service-item">
                                <div class="service-info">
                                    <h4><i class="fas fa-search"></i> Search Service</h4>
                                    <p>Movie and TV show search</p>
                                </div>
                                <div class="service-status online">
                                    <span class="status-dot"></span>
                                    <span>Operational</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="service-category">
                        <h3>External Services</h3>
                        <div class="service-grid">
                            <div class="service-item">
                                <div class="service-info">
                                    <h4><i class="fas fa-globe"></i> MovieKex Embed</h4>
                                    <p>Primary video hosting service</p>
                                </div>
                                <div class="service-status online">
                                    <span class="status-dot"></span>
                                    <span>Operational</span>
                                </div>
                            </div>
                            
                            <div class="service-item">
                                <div class="service-info">
                                    <h4><i class="fas fa-shield-alt"></i> Security Services</h4>
                                    <p>DDoS protection and firewall</p>
                                </div>
                                <div class="service-status online">
                                    <span class="status-dot"></span>
                                    <span>Operational</span>
                                </div>
                            </div>
                            
                            <div class="service-item">
                                <div class="service-info">
                                    <h4><i class="fas fa-chart-line"></i> Analytics</h4>
                                    <p>Usage tracking and monitoring</p>
                                </div>
                                <div class="service-status online">
                                    <span class="status-dot"></span>
                                    <span>Operational</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="status-footer">
                    <p><strong>Last updated:</strong> <span id="statusLastUpdated"></span></p>
                    <p>If you're experiencing issues not reflected here, please check back later.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- About Us Page -->
    <div class="page-overlay" id="aboutPage">
        <div class="page-container">
            <div class="page-header">
                <button class="back-btn" id="aboutBackBtn">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h1>About Us</h1>
            </div>
            <div class="page-content">
                <div class="about-hero">
                    <h2>Welcome to Vidlo</h2>
                    <p>Your ultimate destination for movies and TV shows, created with passion for entertainment and technology.</p>
                </div>
                
                <div class="about-sections">
                    <div class="about-section">
                        <h3><i class="fas fa-rocket"></i> Our Mission</h3>
                        <p>Vidlo was created to provide a seamless, high-quality streaming experience for movie and TV show enthusiasts. We believe that entertainment should be accessible, intuitive, and enjoyable for everyone.</p>
                    </div>
                    
                    <div class="about-section">
                        <h3><i class="fas fa-code"></i> Technology Stack</h3>
                        <p>Built with modern web technologies including HTML5, CSS3, JavaScript, and integrated with the OMDb API for comprehensive movie data. Our platform uses MovieKex for reliable video streaming.</p>
                    </div>
                    
                    <div class="about-section">
                        <h3><i class="fas fa-user-circle"></i> Meet the Developer</h3>
                        <p>Vidlo is developed and maintained by a passionate developer who loves creating innovative streaming solutions. Get to know more about the creator:</p>
                        
                        <div class="developer-info">
                            <div class="social-links">
                                <a href="http://discord.com/users/1395993370245206129" target="_blank" class="social-link discord" onclick="copyDiscord()">
                                    <i class="fab fa-discord"></i>
                                    <span>Discord</span>
                                </a>
                                <a href="https://www.roblox.com/users/4819145/profile" target="_blank" class="social-link roblox">
                                    <i class="fas fa-gamepad"></i>
                                    <span>Roblox</span>
                                </a>
                                <a href="https://profilepage-com.pages.dev/" target="_blank" class="social-link portfolio">
                                    <i class="fas fa-briefcase"></i>
                                    <span>All Projects</span>
                                </a>
                                <a href="https://github.com/Lunerxcurse" target="_blank" class="social-link github">
                                    <i class="fab fa-github"></i>
                                    <span>GitHub</span>
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="about-section">
                        <h3><i class="fas fa-heart"></i> What Makes Us Special</h3>
                        <ul class="feature-list">
                            <li><i class="fas fa-check"></i> Completely free streaming platform</li>
                            <li><i class="fas fa-check"></i> No registration required</li>
                            <li><i class="fas fa-check"></i> Mobile-responsive design</li>
                            <li><i class="fas fa-check"></i> Extensive movie and TV show library</li>
                            <li><i class="fas fa-check"></i> Real-time search functionality</li>
                            <li><i class="fas fa-check"></i> User-friendly interface</li>
                        </ul>
                    </div>
                    
                    <div class="about-section">
                        <h3><i class="fas fa-road"></i> Future Plans</h3>
                        <p>We're constantly working to improve StreamFlix with new features like personalized recommendations, improved streaming quality, subtitle support, and much more. Stay tuned for exciting updates!</p>
                    </div>
                    
                    <div class="about-footer">
                        <p>Thank you for choosing Vidlo. We hope you enjoy your streaming experience!</p>
                    </div>
                </div>
                
            </div>
        </div>
    </div>

    <!-- Movie Detail Modal -->
    <div class="modal-overlay" id="movieModal">
        <div class="movie-detail-fullscreen">
            <button class="close-btn" id="closeModal">
                <i class="fas fa-times"></i>
            </button>
            
            <!-- Hero Section with Trailer -->
            <div class="movie-hero">
                <div class="movie-backdrop">
                    <img id="modalBackdrop" src="" alt="">
                    <div class="backdrop-overlay">
                        <div class="hero-content">
                            <div class="movie-poster-small">
                                <img id="modalPoster" src="" alt="">
                            </div>
                            <div class="movie-info-hero">
                                <h1 id="modalTitle"></h1>
                                <div class="movie-meta-hero">
                                    <span class="year" id="modalYear"></span>
                                    <div class="rating">
                                        <div class="stars" id="modalStars"></div>
                                        <span class="rating-text" id="modalRating"></span>
                                    </div>
                                    <span class="views" id="modalViews"></span>
                                    <span class="duration" id="modalDuration">2h 15m</span>
                                </div>
                                <p class="description" id="modalDescription"></p>
                                
                                <!-- Main Action Buttons -->
                                <div class="main-actions">
                                    <button class="play-button" id="playBtn">
                                        <i class="fas fa-play"></i>
                                        <span>Play</span>
                                    </button>
                                    <button class="trailer-button" id="trailerBtn">
                                        <i class="fas fa-video"></i>
                                        <span>Trailer</span>
                                    </button>
                                    <button class="action-btn-round like-btn" id="likeBtn">
                                        <i class="far fa-thumbs-up"></i>
                                    </button>
                                    <button class="action-btn-round dislike-btn" id="dislikeBtn">
                                        <i class="far fa-thumbs-down"></i>
                                    </button>
                                    <button class="action-btn-round watch-later-btn" id="watchLaterBtn">
                                        <i class="far fa-bookmark"></i>
                                    </button>
                                    <button class="action-btn-round share-btn" id="shareBtn">
                                        <i class="fas fa-share"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Content Sections -->
            <div class="movie-detail-sections">
                <!-- TV Show Episodes Section -->
                <div id="episodesSection" class="detail-section" style="display: none;">
                    <h2>Episodes</h2>
                    <div class="season-selector">
                        <select id="seasonSelect">
                            <option value="1">Season 1</option>
                        </select>
                    </div>
                    <div class="episodes-grid" id="episodesGrid">
                        <!-- Episodes will be populated here -->
                    </div>
                </div>
                
                <!-- Details & Cast Section -->
                <div class="detail-section">
                    <h2>Details</h2>
                    <div class="movie-details-grid">
                        <div class="detail-item">
                            <span class="detail-label">Genre:</span>
                            <span class="detail-value" id="modalGenre">Action, Drama</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Director:</span>
                            <span class="detail-value" id="modalDirector">Unknown</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Cast:</span>
                            <span class="detail-value" id="modalCast">Unknown</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Language:</span>
                            <span class="detail-value" id="modalLanguage">English</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Video Player -->
    <div class="video-player-overlay" id="videoPlayer" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #000; z-index: 3000; opacity: 0; visibility: hidden; transition: all 0.3s ease;">
        <div class="video-container" style="width: 100%; height: 100%; position: relative;">
            <button class="back-btn" id="backBtn" style="position: absolute; top: 1rem; left: 1rem; z-index: 10; background: rgba(0,0,0,0.8); color: white; border: none; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; font-size: 1.2rem;">
                <i class="fas fa-arrow-left"></i>
            </button>
            <div class="embed-player" id="embedPlayer" style="width: 100%; height: 100%;">
                <!-- Embed iframe will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Adblocker Warning -->
    <div id="adblockWarning" class="adblock-warning" style="display: none;">
        <strong> Use an Adblocker! </strong>
        <p>Please ensure you have an adblocker enabled to avoid redirection and unwanted ads. Consider using a trusted adblocker like <a href="https://ublockorigin.com" target="_blank">uBlock Origin</a>.</p>
        <p>Enjoy! </p>
        <button onclick="dismissAdblockWarning()">Dismiss</button>
    </div>

    <script>
        // OMDb API configuration
        const OMDB_API_KEY = 'afcd4c24';
        const OMDB_BASE_URL = 'https://www.omdbapi.com/';

        // Sample movie data with popular movies
        const movieData = {
            featured: [
                {
                    id: "tt0111161",
                    title: "The Shawshank Redemption",
                    year: 1994,
                    rating: 4.8,
                    views: "15.2M",
                    description: "Two imprisoned men bond over a number of years, finding solace and eventual redemption through acts of common decency.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMDFkYTc0MGEtZmNhMC00ZDIzLWFmNTEtODM1ZmRlYWMwMWFmXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg",
                    imdbID: "tt0111161",
                    type: "movie"
                },
                {
                    id: "tt0468569",
                    title: "The Dark Knight",
                    year: 2008,
                    rating: 4.6,
                    views: "18.5M",
                    description: "When the menace known as the Joker wreaks havoc and chaos on the people of Gotham, Batman must accept one of the greatest psychological and physical tests of his ability to fight injustice.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMTMxNTMwODM0NF5BMl5BanBnXkFtZTcwODAyMTk2Mw@@._V1_SX300.jpg",
                    imdbID: "tt0468569",
                    type: "movie"
                },
                {
                    id: "tt1375666",
                    title: "Inception",
                    year: 2010,
                    rating: 4.4,
                    views: "17.3M",
                    description: "A thief who steals corporate secrets through the use of dream-sharing technology is given the inverse task of planting an idea into the mind of a C.E.O.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMjAxMzY3NjcxNF5BMl5BanBnXkFtZTcwNTI5OTM0Mw@@._V1_SX300.jpg",
                    imdbID: "tt1375666",
                    type: "movie"
                },
                {
                    id: "tt0133093",
                    title: "The Matrix",
                    year: 1999,
                    rating: 4.2,
                    views: "13.7M",
                    description: "A computer programmer is led to fight an underground war against powerful computers who have constructed his entire reality with a system called the Matrix.",
                    poster: "https://m.media-amazon.com/images/M/MV5BNzQzOTk3OTAtNDQ0Zi00NDJjLTk4NDItYTRmY2EwMWI5MTktXkEyXkFqcGdeQXVyNjU0OTQ0OTY@._V1_SX300.jpg",
                    imdbID: "tt0133093",
                    type: "movie"
                },
                {
                    id: "tt0816692",
                    title: "Interstellar",
                    year: 2014,
                    rating: 4.3,
                    views: "14.6M",
                    description: "A team of explorers travel through a wormhole in space in an attempt to ensure humanity's survival.",
                    poster: "https://m.media-amazon.com/images/M/MV5BZjdkOTU3MDktN2IxOS00OGEyLWFmMjktY2FiMmZkNWIyODZiXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg",
                    imdbID: "tt0816692",
                    type: "movie"
                },
                {
                    id: "tt0120737",
                    title: "The Lord of the Rings: The Fellowship of the Ring",
                    year: 2001,
                    rating: 4.4,
                    views: "15.1M",
                    description: "A meek Hobbit from the Shire and eight companions set out on a journey to destroy the powerful One Ring and save Middle-earth from the Dark Lord Sauron.",
                    poster: "https://m.media-amazon.com/images/M/MV5BN2EyZjM3NzUtNWUzMi00MTgxLWI0NTctMzY4M2VlOTdjZWRiXkEyXkFqcGdeQXVyNDUzOTQ1MjY@._V1_SX300.jpg",
                    imdbID: "tt0120737",
                    type: "movie"
                }
            ],
            trending: [
                {
                    id: "tt0111161",
                    title: "The Shawshank Redemption",
                    year: 1994,
                    rating: 4.8,
                    views: "15.2M",
                    description: "Two imprisoned men bond over a number of years, finding solace and eventual redemption through acts of common decency.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMDFkYTc0MGEtZmNhMC00ZDIzLWFmNTEtODM1ZmRlYWMwMWFmXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg",
                    imdbID: "tt0111161",
                    type: "movie"
                },
                {
                    id: "tt0068646",
                    title: "The Godfather",
                    year: 1972,
                    rating: 4.7,
                    views: "12.8M",
                    description: "An organized crime dynasty's aging patriarch transfers control of his clandestine empire to his reluctant son.",
                    poster: "https://m.media-amazon.com/images/M/MV5BNWIwODRlZTUtY2U3ZS00NDJjLTk4NDItYTRmY2EwMWI5MTktXkEyXkFqcGdeQXVyNzkwMjQ5NzM@._V1_SX300.jpg",
                    imdbID: "tt0068646",
                    type: "movie"
                },
                {
                    id: "tt0468569",
                    title: "The Dark Knight",
                    year: 2008,
                    rating: 4.6,
                    views: "18.5M",
                    description: "When the menace known as the Joker wreaks havoc and chaos on the people of Gotham, Batman must accept one of the greatest psychological and physical tests of his ability to fight injustice.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMTMxNTMwODM0NF5BMl5BanBnXkFtZTcwODAyMTk2Mw@@._V1_SX300.jpg",
                    imdbID: "tt0468569",
                    type: "movie"
                },
                {
                    id: "tt0050083",
                    title: "12 Angry Men",
                    year: 1957,
                    rating: 4.5,
                    views: "8.9M",
                    description: "A jury holdout attempts to prevent a miscarriage of justice by forcing his colleagues to reconsider the evidence.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMWU4N2FjNzYtNWUzMi00ZTdkLWI5NTgtNjlmMjBiNzU2MmI5XkEyXkFqcGdeQXVyNjc1NTYyMjg@._V1_SX300.jpg",
                    imdbID: "tt0050083",
                    type: "movie"
                },
                {
                    id: "tt0108052",
                    title: "Schindler's List",
                    year: 1993,
                    rating: 4.7,
                    views: "11.3M",
                    description: "In German-occupied Poland during World War II, industrialist Oskar Schindler gradually becomes concerned for his Jewish workforce after witnessing their persecution by the Nazis.",
                    poster: "https://m.media-amazon.com/images/M/MV5BNDE4OTMxMTctNmRhYy00ZTVkLWI0MTEtMDllZjNkYzNjNTc4L2ltYWdlXkEyXkFqcGdeQXVyNDUzOTQ1MjY@._V1_SX300.jpg",
                    imdbID: "tt0108052",
                    type: "movie"
                }
            ],
            topRated: [
                {
                    id: "tt0167260",
                    title: "The Lord of the Rings: The Return of the King",
                    year: 2003,
                    rating: 4.6,
                    views: "14.7M",
                    description: "Gandalf and Aragorn lead the World of Men against Sauron's army to draw his gaze from Frodo and Sam as they approach Mount Doom with the One Ring.",
                    poster: "https://m.media-amazon.com/images/M/MV5BNzA5ZDNlZWMtM2NhNS00NDJjLTk4NDItYTRmY2EwMWI5MTktXkEyXkFqcGdeQXVyNzkwMjQ5NzM@._V1_SX300.jpg",
                    imdbID: "tt0167260",
                    type: "movie"
                },
                {
                    id: "tt0110912",
                    title: "Pulp Fiction",
                    year: 1994,
                    rating: 4.5,
                    views: "13.2M",
                    description: "The lives of two mob hitmen, a boxer, a gangster and his wife, and a pair of diner bandits intertwine in four tales of violence and redemption.",
                    poster: "https://m.media-amazon.com/images/M/MV5BNGNhMDIzZTUtNTBlZi00MTRlLWFjM2ItY2ViMmZkNWIyODZiXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg",
                    imdbID: "tt0110912",
                    type: "movie"
                },
                {
                    id: "tt0167261",
                    title: "The Lord of the Rings: The Two Towers",
                    year: 2002,
                    rating: 4.4,
                    views: "12.9M",
                    description: "While Frodo and Sam edge closer to Mordor with the help of the shifty Gollum, the divided fellowship makes a stand against Sauron's new ally, Saruman, and his hordes of Isengard.",
                    poster: "https://m.media-amazon.com/images/M/MV5BZGMxZTdjZmYtMmE2Ni00ZTdkLWI5NTgtNjlmMjBiNzU2MmI5XkEyXkFqcGdeQXVyNjU0OTQ0OTY@._V1_SX300.jpg",
                    imdbID: "tt0167261",
                    type: "movie"
                },
                {
                    id: "tt0120737",
                    title: "The Lord of the Rings: The Fellowship of the Ring",
                    year: 2001,
                    rating: 4.4,
                    views: "15.1M",
                    description: "A meek Hobbit from the Shire and eight companions set out on a journey to destroy the powerful One Ring and save Middle-earth from the Dark Lord Sauron.",
                    poster: "https://m.media-amazon.com/images/M/MV5BN2EyZjM3NzUtNWUzMi00MTgxLWI0NTctMzY4M2VlOTdjZWRiXkEyXkFqcGdeQXVyNDUzOTQ1MjY@._V1_SX300.jpg",
                    imdbID: "tt0120737",
                    type: "movie"
                },
                {
                    id: "tt0109830",
                    title: "Forrest Gump",
                    year: 1994,
                    rating: 4.3,
                    views: "16.8M",
                    description: "The presidencies of Kennedy and Johnson, the Vietnam War, the Watergate scandal and other historical events unfold from the perspective of an Alabama man with an IQ of 75.",
                    poster: "https://m.media-amazon.com/images/M/MV5BNWIwODRlZTUtY2U3ZS00Yzg1LWE5ZWItZDBhYWQ0NTcxNWRhXkEyXkFqcGdeQXVyMTQxNzMzNDI@._V1_SX300.jpg",
                    imdbID: "tt0109830",
                    type: "movie"
                }
            ],
            recentlyAdded: [
                {
                    id: "tt1375666",
                    title: "Inception",
                    year: 2010,
                    rating: 4.4,
                    views: "17.3M",
                    description: "A thief who steals corporate secrets through the use of dream-sharing technology is given the inverse task of planting an idea into the mind of a C.E.O.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMjAxMzY3NjcxNF5BMl5BanBnXkFtZTcwNTI5OTM0Mw@@._V1_SX300.jpg",
                    imdbID: "tt1375666",
                    type: "movie"
                },
                {
                    id: "tt0816692",
                    title: "Interstellar",
                    year: 2014,
                    rating: 4.3,
                    views: "14.6M",
                    description: "A team of explorers travel through a wormhole in space in an attempt to ensure humanity's survival.",
                    poster: "https://m.media-amazon.com/images/M/MV5BZjdkOTU3MDktN2IxOS00OGEyLWFmMjktY2FiMmZkNWIyODZiXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg",
                    imdbID: "tt0816692",
                    type: "movie"
                },
                {
                    id: "tt0133093",
                    title: "The Matrix",
                    year: 1999,
                    rating: 4.2,
                    views: "13.7M",
                    description: "A computer programmer is led to fight an underground war against powerful computers who have constructed his entire reality with a system called the Matrix.",
                    poster: "https://m.media-amazon.com/images/M/MV5BNzQzOTk3OTAtNDQ0Zi00ZTVkLWI0MTEtMDllZjNkYzNjNTc4L2ltYWdlXkEyXkFqcGdeQXVyNjU0OTQ0OTY@._V1_SX300.jpg",
                    imdbID: "tt0133093",
                    type: "movie"
                },
                {
                    id: "tt0245429",
                    title: "Spirited Away",
                    year: 2001,
                    rating: 4.1,
                    views: "9.8M",
                    description: "During her family's move to the suburbs, a sullen 10-year-old girl wanders into a world ruled by gods, witches, and spirits, and where humans are changed into beasts.",
                    poster: "https://m.media-amazon.com/images/M/MV5BNWIwODRlZTUtY2U3ZS00Yzg1LWE5ZWItZDBhYWQ0NTcxNWRhXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg",
                    imdbID: "tt0245429",
                    type: "movie"
                },
                {
                    id: "tt0317248",
                    title: "City of God",
                    year: 2002,
                    rating: 4.2,
                    views: "7.5M",
                    description: "In the slums of Rio, two kids' paths diverge as one struggles to become a photographer and the other a kingpin.",
                    poster: "https://m.media-amazon.com/images/M/MV5BMjA4ODQ3ODkzNV5BMl5BanBnXkFtZTYwOTc4NDI3._V1_SX300.jpg",
                    imdbID: "tt0317248",
                    type: "movie"
                }
            ]
        };

        // Global variables
        let currentHeroSlide = 0;
        let heroInterval;
        let currentMovie = null;
        let isPlaying = false;
        let currentMedia = { 
            imdbID: '', 
            title: '', 
            year: '', 
            type: '' 
        };
        let allMovies = {}; // Store all movies for filtering

        // Local storage keys
        const STORAGE_KEYS = {
            likes: 'streamflix_likes',
            dislikes: 'streamflix_dislikes',
            watchLater: 'streamflix_watch_later',
            continueWatching: 'streamflix_continue_watching',
            watchHistory: 'streamflix_watch_history'
        };

        // DOM elements
        const elements = {
            heroCarousel: document.getElementById('heroCarousel'),
            searchBtn: document.getElementById('searchBtn'),
            searchOverlay: document.getElementById('searchOverlay'),
            searchInput: document.getElementById('searchInput'),
            searchClose: document.getElementById('searchClose'),
            suggestions: document.getElementById('suggestions'),
            movieModal: document.getElementById('movieModal'),
            closeModal: document.getElementById('closeModal'),
            playBtn: document.getElementById('playBtn'), // Main play button in modal hero
            videoPlayer: document.getElementById('videoPlayer'),
            backBtn: document.getElementById('backBtn'),
            embedPlayer: document.getElementById('embedPlayer'),
            navbar: document.querySelector('.navbar'),
            trendingRow: document.getElementById('trendingRow'),
            topRatedRow: document.getElementById('topRatedRow'),
            recentlyAddedRow: document.getElementById('recentlyAddedRow'),
            continueWatchingSection: document.getElementById('continueWatchingSection'),
            continueWatchingRow: document.getElementById('continueWatchingRow'),
            genresDropdown: document.getElementById('genresDropdown'),
            genresDropdownContent: document.getElementById('genresDropdownContent'),
            accountDropdown: document.getElementById('accountDropdown'),
            accountDropdownContent: document.getElementById('accountDropdownContent'),
            myFavoritesPage: document.getElementById('myFavoritesPage'),
            watchLaterPage: document.getElementById('watchLaterPage'),
            watchHistoryPage: document.getElementById('watchHistoryPage'),
            favoritesGrid: document.getElementById('favoritesGrid'),
            watchLaterGrid: document.getElementById('watchLaterGrid'),
            historyGrid: document.getElementById('historyGrid'),
            favoritesBackBtn: document.getElementById('favoritesBackBtn'),
            watchLaterBackBtn: document.getElementById('watchLaterBackBtn'),
            historyBackBtn: document.getElementById('historyBackBtn'),
            seasonSelect: document.getElementById('seasonSelect'), // Added seasonSelect to elements
            likeBtn: document.getElementById('likeBtn'), // Added to elements
            dislikeBtn: document.getElementById('dislikeBtn'), // Added to elements
            watchLaterBtn: document.getElementById('watchLaterBtn'), // Added to elements
            trailerBtn: document.getElementById('trailerBtn'), // Added to elements
            shareBtn: document.getElementById('shareBtn'), // Added to elements
            // Footer pages
            statusBtn: document.getElementById('statusBtn'),
            aboutBtn: document.getElementById('aboutBtn'),
            statusPage: document.getElementById('statusPage'),
            aboutPage: document.getElementById('aboutPage'),
            statusBackBtn: document.getElementById('statusBackBtn'),
            aboutBackBtn: document.getElementById('aboutBackBtn'),
            statusLastUpdated: document.getElementById('statusLastUpdated')
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            setupEventListeners();
            
            populateMovieRows();
            updateContinueWatchingSection();
            
            // Store all movies for filtering
            allMovies = {
                trending: movieData.trending,
                topRated: movieData.topRated,
                recentlyAdded: movieData.recentlyAdded
            };
        }

        function setupEventListeners() {
            // Navigation
            if (elements.searchBtn) elements.searchBtn.addEventListener('click', toggleSearch);
            if (elements.searchClose) elements.searchClose.addEventListener('click', toggleSearch);
            if (elements.searchInput) elements.searchInput.addEventListener('input', handleSearch);
            
            // Mobile navigation
            const navHome = document.getElementById('navHome');
            const navMovies = document.getElementById('navMovies');
            const navSearch = document.getElementById('navSearch');
            const navAccount = document.getElementById('navAccount');
            
            if (navHome) {
                navHome.addEventListener('click', (e) => {
                    e.preventDefault();
                    setActiveNavItem('navHome');
                    closePage();
                    closeModal();
                    closeMobileDropdown();
                });
            }
            
            if (navMovies) {
                navMovies.addEventListener('click', (e) => {
                    e.preventDefault();
                    setActiveNavItem('navMovies');
                    closePage();
                    closeModal();
                    closeMobileDropdown();
                    // Show all movies or filter by movies
                    resetToOriginalMovies();
                });
            }
            
            if (navSearch) {
                navSearch.addEventListener('click', (e) => {
                    e.preventDefault();
                    setActiveNavItem('navSearch');
                    closePage();
                    closeModal();
                    closeMobileDropdown();
                    toggleSearch();
                });
            }
            
            if (navAccount) {
                navAccount.addEventListener('click', (e) => {
                    e.preventDefault();
                    setActiveNavItem('navAccount');
                    toggleAccountDropdownMobile();
                });
            }
            
            // Dropdown menus
            if (elements.genresDropdown) {
                elements.genresDropdown.addEventListener('click', (e) => {
                    e.preventDefault();
                    toggleDropdown('genresDropdownContent');
                });
            }
            
            if (elements.accountDropdown) {
                elements.accountDropdown.addEventListener('click', (e) => {
                    e.preventDefault();
                    toggleDropdown('accountDropdownContent');
                });
            }
            
            // Genre selection
            if (elements.genresDropdownContent) {
                elements.genresDropdownContent.addEventListener('click', (e) => {
                    if (e.target.dataset.genre) {
                        e.preventDefault();
                        filterByGenre(e.target.dataset.genre);
                        closeDropdowns();
                    }
                });
            }
            
            // Modal
            if (elements.closeModal) elements.closeModal.addEventListener('click', closeModal);
            if (elements.movieModal) {
                elements.movieModal.addEventListener('click', (e) => {
                    if (e.target === elements.movieModal) closeModal();
                });
            }

            // Video player's back button
            if (elements.backBtn) elements.backBtn.addEventListener('click', closeVideoPlayer);
            
            // Account settings and pages
            if (elements.accountDropdownContent) {
                elements.accountDropdownContent.addEventListener('click', (e) => {
                    if (e.target.closest('a')) {
                        const linkText = e.target.closest('a').textContent;
                        if (linkText.includes('Account Settings')) {
                            e.preventDefault();
                            openAccountSettings();
                            closeDropdowns();
                        } else if (linkText.includes('My Favorites')) {
                            e.preventDefault();
                            openMyFavorites();
                            closeDropdowns();
                        } else if (linkText.includes('Watch Later')) {
                            e.preventDefault();
                            openWatchLater();
                            closeDropdowns();
                        } else if (linkText.includes('Watch History')) {
                            e.preventDefault();
                            openWatchHistory();
                            closeDropdowns();
                        }
                    }
                });
            }
            
            // Page navigation
            if (elements.favoritesBackBtn) elements.favoritesBackBtn.addEventListener('click', closePage);
            if (elements.watchLaterBackBtn) elements.watchLaterBackBtn.addEventListener('click', closePage);
            if (elements.historyBackBtn) elements.historyBackBtn.addEventListener('click', closePage);

            // Footer button event listeners
            if (elements.statusBtn) elements.statusBtn.addEventListener('click', openStatusPage);
            if (elements.aboutBtn) elements.aboutBtn.addEventListener('click', openAboutPage);

            // Back buttons for footer pages
            if (elements.statusBackBtn) elements.statusBackBtn.addEventListener('click', closePage);
            if (elements.aboutBackBtn) elements.aboutBackBtn.addEventListener('click', closePage);

            // Live Shows link
            const liveShowsLink = document.getElementById('liveShowsLink');
            if (liveShowsLink) {
                liveShowsLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    filterByTVShows();
                    closeDropdowns();
                });
            }
            
            // Close dropdowns when clicking outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.nav-dropdown')) {
                    closeDropdowns();
                }
                if (!e.target.closest('.search-container')) {
                    clearSuggestions();
                }
            });
            
            // Close search/modals/pages on escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    if (elements.searchOverlay.classList.contains('active')) {
                        toggleSearch();
                    } else if (elements.movieModal.classList.contains('active')) {
                        closeModal();
                    } else if (elements.videoPlayer.classList.contains('active')) {
                        closeVideoPlayer();
                    } else if (document.querySelector('.page-overlay.active')) {
                        closePage();
                    } else {
                        closeDropdowns();
                    }
                }
            });
        }

        function setActiveNavItem(activeId) {
            // Remove active class from all nav items
            const navItems = document.querySelectorAll('.mobile-bottom-nav a');
            navItems.forEach(item => item.classList.remove('active'));
            
            // Add active class to selected item
            const activeItem = document.getElementById(activeId);
            if (activeItem) {
                activeItem.classList.add('active');
            }
        }

        // Add new function for mobile account dropdown
        function toggleAccountDropdownMobile() {
            const existingDropdown = document.getElementById('mobileAccountDropdown');
            if (existingDropdown) {
                closeMobileDropdown(); // Use the close function to ensure proper cleanup
                return;
            }

            // Create mobile account dropdown
            const dropdown = document.createElement('div');
            dropdown.id = 'mobileAccountDropdown';
            dropdown.className = 'mobile-account-dropdown';
            dropdown.innerHTML = `
                <div class="mobile-dropdown-content">
                    <a href="#" onclick="openAccountSettings(); closeMobileDropdown();"><i class="fas fa-user-cog"></i> Account Settings</a>
                    <a href="#" onclick="openMyFavorites(); closeMobileDropdown();"><i class="fas fa-heart"></i> My Favorites</a>
                    <a href="#" onclick="openWatchLater(); closeMobileDropdown();"><i class="fas fa-bookmark"></i> Watch Later</a>
                    <a href="#" onclick="openWatchHistory(); closeMobileDropdown();"><i class="fas fa-history"></i> Watch History</a>
                    <a href="#"><i class="fas fa-sign-out-alt"></i> Sign Out</a>
                </div>
            `;
            
            document.body.appendChild(dropdown);
            setTimeout(() => dropdown.classList.add('active'), 10);
            
            // Close when clicking outside
            document.addEventListener('click', closeMobileDropdownOnClickOutside, true);
        }

        function closeMobileDropdown() {
            const dropdown = document.getElementById('mobileAccountDropdown');
            if (dropdown) {
                dropdown.classList.remove('active');
                setTimeout(() => dropdown.remove(), 300);
            }
            document.removeEventListener('click', closeMobileDropdownOnClickOutside, true);
        }

        function closeMobileDropdownOnClickOutside(e) {
            const dropdown = document.getElementById('mobileAccountDropdown');
            const navAccount = document.getElementById('navAccount');
            if (dropdown && !dropdown.contains(e.target) && !navAccount.contains(e.target)) {
                closeMobileDropdown();
            }
        }

        // Search functionality with OMDb API
        async function handleSearch(e) {
            const query = e.target.value.trim();
            if (query.length < 3) {
                clearSuggestions();
                return;
            }
            
            try {
                const response = await fetch(`${OMDB_BASE_URL}?s=${encodeURIComponent(query)}&apikey=${OMDB_API_KEY}`);
                const data = await response.json();
                
                if (data.Response === 'True') {
                    displaySearchSuggestions(data.Search.slice(0, 8)); // Limit to 8 results
                } else {
                    clearSuggestions();
                }
            } catch (error) {
                console.error('Search error:', error);
                clearSuggestions();
            }
        }

        function displaySearchSuggestions(results) {
            const suggestionsDiv = elements.suggestions;
            suggestionsDiv.innerHTML = '';
            
            results.forEach(item => {
                const suggestionItem = document.createElement('div');
                suggestionItem.className = 'suggestion-item';
                
                const poster = item.Poster !== 'N/A' ? item.Poster : 'no-image-thumbnail.png';
                
                suggestionItem.innerHTML = `
                    <img src="${poster}" alt="${item.Title}" onerror="this.src='no-image-thumbnail.png'">
                    <div class="suggestion-info">
                        <div class="suggestion-title">${item.Title}</div>
                        <div class="suggestion-meta">${item.Year} • ${item.Type}</div>
                    </div>
                `;
                
                suggestionItem.addEventListener('click', () => selectSearchResult(item));
                suggestionsDiv.appendChild(suggestionItem);
            });
        }

        function clearSuggestions() {
            elements.suggestions.innerHTML = '';
        }

        function toggleDropdown(dropdownId) {
            closeDropdowns();
            const dropdown = document.getElementById(dropdownId);
            dropdown.classList.add('active');
        }

        function closeDropdowns() {
            document.querySelectorAll('.dropdown-content').forEach(dropdown => {
                dropdown.classList.remove('active');
            });
        }

        async function filterByGenre(genre) {
            console.log('Filtering by genre:', genre);
            
            // Show loading state
            const sections = ['trending', 'topRated', 'recentlyAdded'];
            sections.forEach(section => {
                const container = document.getElementById(section + 'Row');
                container.innerHTML = '<div style="color: #fff; padding: 2rem; text-align: center;">Loading...</div>';
            });
            
            try {
                const genreQueries = {
                    'action': 'action',
                    'comedy': 'comedy',
                    'drama': 'drama',
                    'horror': 'horror',
                    'romance': 'romance',
                    'thriller': 'thriller',
                    'sci-fi': 'science fiction',
                    'documentary': 'documentary'
                };
                
                const searchQuery = genreQueries[genre] || genre;
                const response = await fetch(`${OMDB_BASE_URL}?s=${encodeURIComponent(searchQuery)}&type=movie&apikey=${OMDB_API_KEY}`);
                const data = await response.json();
                
                if (data.Response === 'True') {
                    const moviePromises = data.Search.slice(0, 15).map(async (movie) => {
                        try {
                            const detailResponse = await fetch(`${OMDB_BASE_URL}?i=${movie.imdbID}&apikey=${OMDB_API_KEY}`);
                            const details = await detailResponse.json();
                            
                            if (details.Response === 'True') {
                                return {
                                    id: movie.imdbID,
                                    title: details.Title,
                                    year: details.Year,
                                    rating: details.imdbRating !== 'N/A' ? parseFloat(details.imdbRating) / 2 : 4.0,
                                    views: `${Math.floor(Math.random() * 10) + 1}.${Math.floor(Math.random() * 10)}M`,
                                    description: details.Plot !== 'N/A' ? details.Plot : 'No description available.',
                                    poster: details.Poster !== 'N/A' ? details.Poster : 'no-image-thumbnail.png',
                                    imdbID: movie.imdbID,
                                    type: movie.Type,
                                    genre: details.Genre
                                };
                            }
                        } catch (error) {
                            console.error('Error fetching movie details:', error);
                            return null;
                        }
                    });
                    
                    const movies = (await Promise.all(moviePromises)).filter(movie => movie !== null);
                    
                    const genreTitles = {
                        'action': { title: 'Action Movies', description: 'Explosive adventures and thrilling action sequences' },
                        'comedy': { title: 'Comedy Movies', description: 'Hilarious films to brighten your day' },
                        'drama': { title: 'Drama Movies', description: 'Compelling stories that touch the heart' },
                        'horror': { title: 'Horror Movies', description: 'Spine-chilling thrills and supernatural scares' },
                        'romance': { title: 'Romance Movies', description: 'Love stories that warm the heart' },
                        'thriller': { title: 'Thriller Movies', description: 'Edge-of-your-seat suspense and mystery' },
                        'sci-fi': { title: 'Sci-Fi Movies', description: 'Futuristic adventures and scientific wonders' },
                        'documentary': { title: 'Documentary Movies', description: 'Real stories and educational content' }
                    };
                    
                    const genreInfo = genreTitles[genre] || { title: `${genre.charAt(0).toUpperCase() + genre.slice(1)} Movies`, description: 'Curated selection of movies' };
                    
                    document.querySelector('#trendingRow').previousElementSibling.innerHTML = `
                        <h2>${genreInfo.title}</h2>
                        <p style="color: #cccccc; font-size: 0.9rem; margin-top: -1rem; margin-bottom: 1rem;">${genreInfo.description}</p>
                    `;
                    
                    const trending = movies.slice(0, 5);
                    const topRated = movies.slice(5, 10);
                    const recentlyAdded = movies.slice(10, 15);
                    
                    populateMovieRow(elements.trendingRow, trending);
                    populateMovieRow(elements.topRatedRow, topRated);
                    populateMovieRow(elements.recentlyAddedRow, recentlyAdded);
                    
                } else {
                    // Fallback to original movies if no results
                    resetToOriginalMovies();
                }
            } catch (error) {
                console.error('Error filtering by genre:', error);
                resetToOriginalMovies();
            }
        }

        function resetToOriginalMovies() {
            // Reset section titles
            const sections = document.querySelectorAll('.content-section');
            // Assuming the first three are Trending, Top Rated, Recently Added
            if (sections[0]) {
                sections[0].querySelector('h2').textContent = 'Trending Now';
                const p1 = sections[0].querySelector('p');
                if (p1) p1.remove();
            }
            if (sections[1]) sections[1].querySelector('h2').textContent = 'Top Rated';
            if (sections[2]) sections[2].querySelector('h2').textContent = 'Recently Added';
            
            populateMovieRow(elements.trendingRow, allMovies.trending);
            populateMovieRow(elements.topRatedRow, allMovies.topRated);
            populateMovieRow(elements.recentlyAddedRow, allMovies.recentlyAdded);
        }

        async function filterByTVShows() {
            console.log('Filtering by TV Shows');
            
            // Show loading state
            const sections = ['trending', 'topRated', 'recentlyAdded'];
            sections.forEach(section => {
                const container = document.getElementById(section + 'Row');
                container.innerHTML = '<div style="color: #fff; padding: 2rem; text-align: center;">Loading TV Shows...</div>';
            });
            
            try {
                // Search for popular TV series
                const tvQueries = ['Breaking Bad', 'Game of Thrones', 'The Office', 'Stranger Things', 'Friends', 'The Crown', 'Narcos', 'Sherlock', 'House of Cards', 'Westworld', 'The Walking Dead', 'Lost', 'Prison Break', 'Dexter', 'How I Met Your Mother'];
                
                const moviePromises = tvQueries.map(async (query) => {
                    try {
                        const response = await fetch(`${OMDB_BASE_URL}?s=${encodeURIComponent(query)}&type=series&apikey=${OMDB_API_KEY}`);
                        const data = await response.json();
                        
                        if (data.Response === 'True' && data.Search && data.Search.length > 0) {
                            const series = data.Search[0]; // Take first result
                            const detailResponse = await fetch(`${OMDB_BASE_URL}?i=${series.imdbID}&apikey=${OMDB_API_KEY}`);
                            const details = await detailResponse.json();
                            
                            if (details.Response === 'True') {
                                return {
                                    id: series.imdbID,
                                    title: details.Title,
                                    year: details.Year,
                                    rating: details.imdbRating !== 'N/A' ? parseFloat(details.imdbRating) / 2 : 4.0,
                                    views: `${Math.floor(Math.random() * 10) + 1}.${Math.floor(Math.random() * 10)}M`,
                                    description: details.Plot !== 'N/A' ? details.Plot : 'No description available.',
                                    poster: details.Poster !== 'N/A' ? details.Poster : 'no-image-thumbnail.png',
                                    imdbID: series.imdbID,
                                    type: 'series',
                                    genre: details.Genre || 'Unknown'
                                };
                            }
                        }
                    } catch (error) {
                        console.error('Error fetching TV show details:', error);
                        return null;
                    }
                });
                
                const tvShows = (await Promise.all(moviePromises)).filter(show => show !== null);
                
                if (tvShows.length > 0) {
                    // Update section titles
                    document.querySelector('#trendingRow').previousElementSibling.innerHTML = `
                        <h2>Popular TV Shows</h2>
                        <p style="color: #cccccc; font-size: 0.9rem; margin-top: -1rem; margin-bottom: 1rem;">Binge-worthy series you can't miss</p>
                    `;
                    
                    const trending = tvShows.slice(0, 5);
                    const topRated = tvShows.slice(5, 10);
                    const recentlyAdded = tvShows.slice(10, 15);
                    
                    populateMovieRow(elements.trendingRow, trending);
                    populateMovieRow(elements.topRatedRow, topRated);
                    populateMovieRow(elements.recentlyAddedRow, recentlyAdded);
                    
                } else {
                    // Fallback to original movies if no results
                    resetToOriginalMovies();
                }
            } catch (error) {
                console.error('Error filtering TV shows:', error);
                resetToOriginalMovies();
            }
        }

        function openAccountSettings() {
            // Create account settings modal
            const accountModal = document.createElement('div');
            accountModal.className = 'modal-overlay account-settings-modal';
            accountModal.id = 'accountSettingsModal';
            
            accountModal.innerHTML = `
                <div class="account-settings">
                    <button class="close-btn" onclick="closeAccountSettings()">
                        <i class="fas fa-times"></i>
                    </button>
                    <div class="account-settings-content">
                        <h2>Account Settings</h2>
                        
                        <div class="settings-section">
                            <h3>Profile Information</h3>
                            <div class="setting-item">
                                <label for="username">Username</label>
                                <input type="text" id="username" value="StreamFlixUser" readonly>
                            </div>
                            <div class="setting-item">
                                <label for="email">Email</label>
                                <input type="email" id="email" value="user@streamflix.com" readonly>
                            </div>
                        </div>
                        
                        <div class="settings-section">
                            <h3>Playback Settings</h3>
                            <div class="setting-item">
                                <label for="autoplay">Auto-play next episode</label>
                                <input type="checkbox" id="autoplay" checked>
                            </div>
                            <div class="setting-item">
                                <label for="quality">Default video quality</label>
                                <select id="quality">
                                    <option value="auto">Auto</option>
                                    <option value="1080p">1080p</option>
                                    <option value="720p">720p</option>
                                    <option value="480p">480p</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="settings-section">
                            <h3>Privacy & Data</h3>
                            <div class="setting-item">
                                <label for="watchHistory">Save watch history</label>
                                <input type="checkbox" id="watchHistory" checked>
                            </div>
                            <div class="setting-item">
                                <label for="recommendations">Personalized recommendations</label>
                                <input type="checkbox" id="recommendations" checked>
                            </div>
                        </div>
                        
                        <div class="settings-section">
                            <h3>Notifications</h3>
                            <div class="setting-item">
                                <label for="emailNotifications">Email notifications</label>
                                <input type="checkbox" id="emailNotifications">
                            </div>
                            <div class="setting-item">
                                <label for="newReleases">New releases alerts</label>
                                <input type="checkbox" id="newReleases" checked>
                            </div>
                        </div>
                        
                        <div class="settings-actions">
                            <button class="action-btn primary" onclick="saveAccountSettings()">Save Changes</button>
                            <button class="action-btn secondary" onclick="resetAccountSettings()">Reset to Default</button>
                            <button class="action-btn danger" onclick="clearAllData()">Clear All Data</button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(accountModal);
            accountModal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Load saved settings
            loadAccountSettings();
        }

        function closeAccountSettings() {
            const modal = document.getElementById('accountSettingsModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = '';
                setTimeout(() => {
                    modal.remove();
                }, 300);
            }
        }

        function loadAccountSettings() {
            const settings = JSON.parse(localStorage.getItem('streamflix_settings')) || {};
            
            if (settings.autoplay !== undefined) {
                document.getElementById('autoplay').checked = settings.autoplay;
            }
            if (settings.quality) {
                document.getElementById('quality').value = settings.quality;
            }
            if (settings.watchHistory !== undefined) {
                document.getElementById('watchHistory').checked = settings.watchHistory;
            }
            if (settings.recommendations !== undefined) {
                document.getElementById('recommendations').checked = settings.recommendations;
            }
            if (settings.emailNotifications !== undefined) {
                document.getElementById('emailNotifications').checked = settings.emailNotifications;
            }
            if (settings.newReleases !== undefined) {
                document.getElementById('newReleases').checked = settings.newReleases;
            }
        }

        function saveAccountSettings() {
            const settings = {
                autoplay: document.getElementById('autoplay').checked,
                quality: document.getElementById('quality').value,
                watchHistory: document.getElementById('watchHistory').checked,
                recommendations: document.getElementById('recommendations').checked,
                emailNotifications: document.getElementById('emailNotifications').checked,
                newReleases: document.getElementById('newReleases').checked
            };
            
            localStorage.setItem('streamflix_settings', JSON.stringify(settings));
            
            // Show success message
            const successMsg = document.createElement('div');
            successMsg.className = 'success-message';
            successMsg.textContent = 'Settings saved successfully!';
            successMsg.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #28a745;
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                font-weight: 500;
                z-index: 10000;
                opacity: 0;
                transform: translateY(-20px);
                transition: all 0.3s ease;
            `;
            
            document.body.appendChild(successMsg);
            setTimeout(() => successMsg.style.opacity = '1', 100);
            setTimeout(() => {
                successMsg.style.opacity = '0';
                setTimeout(() => successMsg.remove(), 300);
            }, 2000);
        }

        function resetAccountSettings() {
            document.getElementById('autoplay').checked = true;
            document.getElementById('quality').value = 'auto';
            document.getElementById('watchHistory').checked = true;
            document.getElementById('recommendations').checked = true;
            document.getElementById('emailNotifications').checked = false;
            document.getElementById('newReleases').checked = true;
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear all data? This will remove your watch history, likes, and saved movies.')) {
                localStorage.clear();
                alert('All data has been cleared.');
                closeAccountSettings();
                // Refresh the page to reset everything
                window.location.reload();
            }
        }

        function handleScroll() {
            // Remove scroll effect since Tubi has solid navbar
        }

        function toggleSearch() {
            elements.searchOverlay.classList.toggle('active');
            if (elements.searchOverlay.classList.contains('active')) {
                elements.searchInput.focus();
            } else {
                elements.searchInput.value = '';
                clearSuggestions();
            }
        }

        function createHeroCarousel() {
            elements.heroCarousel.innerHTML = '';
            
            movieData.featured.forEach((movie, index) => {
                const slide = document.createElement('div');
                slide.className = `hero-slide ${index === 0 ? 'active' : ''}`;
                slide.innerHTML = `
                    <img src="${movie.poster}" alt="${movie.title}">
                    <div class="hero-overlay">
                        <div class="hero-content">
                            <h2>${movie.title}</h2>
                            <p>${movie.description}</p>
                        </div>
                    </div>
                `;
                slide.addEventListener('click', () => openMovieModal(movie));
                elements.heroCarousel.appendChild(slide);
            });
        }

        function startHeroCarousel() {
            heroInterval = setInterval(() => {
                changeHeroSlide(1);
            }, 6000);
        }

        function changeHeroSlide(direction) {
            const slides = document.querySelectorAll('.hero-slide');
            if (slides.length === 0) return;
            slides[currentHeroSlide].classList.remove('active');
            
            currentHeroSlide += direction;
            if (currentHeroSlide >= slides.length) currentHeroSlide = 0;
            if (currentHeroSlide < 0) currentHeroSlide = slides.length - 1;
            
            slides[currentHeroSlide].classList.add('active');
        }

        function populateMovieRows() {
            populateMovieRow(elements.trendingRow, movieData.trending);
            populateMovieRow(elements.topRatedRow, movieData.topRated);
            populateMovieRow(elements.recentlyAddedRow, movieData.recentlyAdded);
        }

        function populateMovieRow(container, movies) {
            container.innerHTML = '';
            
            movies.forEach(movie => {
                const movieCard = createMovieCard(movie);
                container.appendChild(movieCard);
            });
        }

        function createMovieCard(movie) {
            const card = document.createElement('div');
            card.className = 'movie-card';
            
            const continueWatching = getContinueWatchingData();
            const progress = continueWatching[movie.id]?.progress || 0;
            
            // Use no-image-thumbnail if poster is missing or N/A
            const posterSrc = movie.poster && movie.poster !== 'N/A' 
                ? movie.poster 
                : 'no-image-thumbnail.png';
            
            card.innerHTML = `
                <div class="movie-poster">
                    <img src="${posterSrc}" alt="${movie.title}" onerror="this.src='no-image-thumbnail.png'">
                    ${progress > 0 ? `<div class="progress-indicator" style="width: ${progress}%"></div>` : ''}
                </div>
                <div class="movie-info">
                    <div class="movie-title">${movie.title}</div>
                    <div class="movie-meta">
                        <div class="rating">
                            <div class="stars">${generateStars(movie.rating)}</div>
                            <span class="rating-text">${movie.rating}</span>
                        </div>
                        <div class="views">${movie.views} views</div>
                    </div>
                </div>
            `;
            
            card.addEventListener('click', () => openMovieModal(movie));
            
            return card;
        }

        function generateStars(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            let starsHtml = '';
            
            for (let i = 0; i < fullStars; i++) {
                starsHtml += '<i class="fas fa-star star"></i>';
            }
            
            if (hasHalfStar) {
                starsHtml += '<i class="fas fa-star-half-alt star"></i>';
            }
            
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
            for (let i = 0; i < emptyStars; i++) {
                starsHtml += '<i class="far fa-star star"></i>';
            }
            
            return starsHtml;
        }

        function openMovieModal(movie) {
            currentMovie = movie;
            currentMedia = { 
                imdbID: movie.imdbID, 
                title: movie.title, 
                year: movie.year, 
                type: movie.type || 'movie' 
            };
            
            // Update modal content with fallback for missing images
            const posterSrc = movie.poster && movie.poster !== 'N/A' ? movie.poster : 'no-image-thumbnail.png';
            const backdropSrc = movie.poster && movie.poster !== 'N/A' ? movie.poster : 'no-image-thumbnail.png';
            
            document.getElementById('modalPoster').src = posterSrc;
            document.getElementById('modalPoster').onerror = function() { this.src = 'no-image-thumbnail.png'; };
            
            document.getElementById('modalBackdrop').src = backdropSrc;
            document.getElementById('modalBackdrop').onerror = function() { this.src = 'no-image-thumbnail.png'; };
            
            document.getElementById('modalTitle').textContent = movie.title;
            document.getElementById('modalYear').textContent = movie.year;
            document.getElementById('modalStars').innerHTML = generateStars(movie.rating);
            document.getElementById('modalRating').textContent = movie.rating;
            document.getElementById('modalViews').textContent = `${movie.views} views`;
            document.getElementById('modalDescription').textContent = movie.description;
            
            // Update additional details
            document.getElementById('modalGenre').textContent = movie.genre || 'Action, Drama';
            document.getElementById('modalDirector').textContent = 'Unknown'; // TODO: Fetch from OMDB details
            document.getElementById('modalCast').textContent = 'Unknown';     // TODO: Fetch from OMDB details
            document.getElementById('modalLanguage').textContent = 'English'; // TODO: Fetch from OMDB details
            document.getElementById('modalDuration').textContent = movie.type === 'series' ? 'TV Series' : '2h 15m';
            
            // Show/hide episodes section for TV shows
            const episodesSection = document.getElementById('episodesSection');
            if (movie.type === 'series') {
                episodesSection.style.display = 'block';
                // Reset season select to 1 when opening modal for a series
                if (elements.seasonSelect) {
                    elements.seasonSelect.value = '1';
                }
                populateEpisodes(movie);
            } else {
                episodesSection.style.display = 'none';
            }
            
            // Set up and update action buttons
            setupActionButtons(movie); // Attach listeners
            updateActionButtons(movie); // Update visual state based on data
            
            // Show modal
            elements.movieModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            elements.movieModal.classList.remove('active');
            document.body.style.overflow = '';
        }

        function setupActionButtons(movie) {
            // Remove existing listeners to prevent duplicates
            const playBtn = document.getElementById('playBtn');
            const likeBtn = document.getElementById('likeBtn');
            const dislikeBtn = document.getElementById('dislikeBtn');
            const watchLaterBtn = document.getElementById('watchLaterBtn');
            const trailerBtn = document.getElementById('trailerBtn');
            const shareBtn = document.getElementById('shareBtn');

            // Update elements object references
            elements.playBtn = playBtn;
            elements.likeBtn = likeBtn;
            elements.dislikeBtn = dislikeBtn;
            elements.watchLaterBtn = watchLaterBtn;
            elements.trailerBtn = trailerBtn;
            elements.shareBtn = shareBtn;

            // Remove existing event listeners by cloning nodes
            if (playBtn) {
                const newPlayBtn = playBtn.cloneNode(true);
                playBtn.parentNode.replaceChild(newPlayBtn, playBtn);
                elements.playBtn = newPlayBtn;
                newPlayBtn.addEventListener('click', () => openVideoPlayer(movie));
            }

            if (likeBtn) {
                const newLikeBtn = likeBtn.cloneNode(true);
                likeBtn.parentNode.replaceChild(newLikeBtn, likeBtn);
                elements.likeBtn = newLikeBtn;
                newLikeBtn.addEventListener('click', () => toggleLike(movie));
            }

            if (dislikeBtn) {
                const newDislikeBtn = dislikeBtn.cloneNode(true);
                dislikeBtn.parentNode.replaceChild(newDislikeBtn, dislikeBtn);
                elements.dislikeBtn = newDislikeBtn;
                newDislikeBtn.addEventListener('click', () => toggleDislike(movie));
            }

            if (watchLaterBtn) {
                const newWatchLaterBtn = watchLaterBtn.cloneNode(true);
                watchLaterBtn.parentNode.replaceChild(newWatchLaterBtn, watchLaterBtn);
                elements.watchLaterBtn = newWatchLaterBtn;
                newWatchLaterBtn.addEventListener('click', () => toggleWatchLater(movie));
            }

            if (trailerBtn) {
                const newTrailerBtn = trailerBtn.cloneNode(true);
                trailerBtn.parentNode.replaceChild(newTrailerBtn, trailerBtn);
                elements.trailerBtn = newTrailerBtn;
                newTrailerBtn.addEventListener('click', () => playTrailer(movie));
            }

            if (shareBtn) {
                const newShareBtn = shareBtn.cloneNode(true);
                shareBtn.parentNode.replaceChild(newShareBtn, shareBtn);
                elements.shareBtn = newShareBtn;
                newShareBtn.addEventListener('click', () => shareMovie(movie));
            }
        }
        
        // This function will only update the visual state of the buttons
        function updateActionButtons(movie) {
            const likes = getLikedMovies();
            const dislikes = getDislikedMovies();
            const watchLater = getWatchLaterMovies();

            if (elements.likeBtn) {
                if (likes.includes(movie.id)) {
                    elements.likeBtn.classList.add('active');
                    elements.likeBtn.querySelector('i').className = 'fas fa-thumbs-up';
                } else {
                    elements.likeBtn.classList.remove('active');
                    elements.likeBtn.querySelector('i').className = 'far fa-thumbs-up';
                }
            }
            
            if (elements.dislikeBtn) {
                if (dislikes.includes(movie.id)) {
                    elements.dislikeBtn.classList.add('active');
                    elements.dislikeBtn.querySelector('i').className = 'fas fa-thumbs-down';
                } else {
                    elements.dislikeBtn.classList.remove('active');
                    elements.dislikeBtn.querySelector('i').className = 'far fa-thumbs-down';
                }
            }

            if (elements.watchLaterBtn) {
                if (watchLater.some(m => m.id === movie.id)) {
                    elements.watchLaterBtn.classList.add('active');
                    elements.watchLaterBtn.querySelector('i').className = 'fas fa-bookmark';
                } else {
                    elements.watchLaterBtn.classList.remove('active');
                    elements.watchLaterBtn.querySelector('i').className = 'far fa-bookmark';
                }
            }
        }

        function populateEpisodes(movie) {
            const episodesGrid = document.getElementById('episodesGrid');
            episodesGrid.innerHTML = '';
            
            // Generate sample episodes for demonstration
            // Using no-image-thumbnail if movie.poster is not available
            const episodeThumbnailSrc = movie.poster && movie.poster !== 'N/A' ? movie.poster : 'no-image-thumbnail.png';

            const episodes = [
                { number: 1, title: 'Pilot Episode', description: 'The beginning of an incredible journey...', duration: '45m' },
                { number: 2, title: 'The Plot Thickens', description: 'New mysteries emerge as our heroes face unexpected challenges...', duration: '42m' },
                { number: 3, title: 'Revelations', description: 'Shocking truths come to light in this gripping episode...', duration: '48m' },
                { number: 4, title: 'Point of No Return', description: 'Everything changes as the stakes reach new heights...', duration: '44m' },
                { number: 5, title: 'The Reckoning', description: 'The climactic episode that will leave you breathless...', duration: '52m' },
                { number: 6, title: 'New Beginnings', description: 'As one chapter ends, another begins with new possibilities...', duration: '46m' }
            ];
            
            episodes.forEach(episode => {
                const episodeCard = document.createElement('div');
                episodeCard.className = 'episode-card';
                
                episodeCard.innerHTML = `
                    <div class="episode-thumbnail">
                        <img src="${episodeThumbnailSrc}" alt="Episode ${episode.number}" onerror="this.src='no-image-thumbnail.png';" style="filter: brightness(0.7);">
                        <button class="episode-play-btn">
                            <i class="fas fa-play"></i>
                        </button>
                    </div>
                    <div class="episode-info">
                        <div class="episode-number">Episode ${episode.number}</div>
                        <div class="episode-title">${episode.title}</div>
                        <div class="episode-description">${episode.description}</div>
                        <div class="episode-duration">${episode.duration}</div>
                    </div>
                `;
                
                // Pass the current movie object to playEpisode for context
                episodeCard.addEventListener('click', () => playEpisode(movie, episode.number));
                episodesGrid.appendChild(episodeCard);
            });
        }

        function playTrailer(movie) {
            // For now, playing the trailer is the same as playing the movie
            openVideoPlayer(movie);
        }

        function shareMovie(movie) {
            if (navigator.share) {
                navigator.share({
                    title: movie.title,
                    text: `Check out ${movie.title} on StreamFlix!`,
                    url: window.location.href
                });
            } else {
                // Fallback: copy to clipboard
                const url = `${window.location.origin}/?movie=${movie.imdbID}`;
                navigator.clipboard.writeText(url).then(() => {
                    alert('Movie link copied to clipboard!');
                }).catch(() => {
                    // If clipboard API fails, show a prompt with the URL
                    prompt('Copy this link:', url);
                });
            }
        }

        function playEpisode(movie, episodeNumber) {
            // Pass the movie object and episode number to openVideoPlayer
            openVideoPlayer(movie, episodeNumber);
        }

        function openVideoPlayer(movie, episodeNumber = null) {
            if (!movie || !movie.imdbID) {
                console.error("Cannot play: movie object or imdbID is missing.");
                return;
            }
            
            const videoPlayerOverlay = elements.videoPlayer; // Use elements object
            videoPlayerOverlay.style.opacity = '1';
            videoPlayerOverlay.style.visibility = 'visible';
            document.body.style.overflow = 'hidden';
            
            let embedLink;
            const seasonNumber = elements.seasonSelect ? elements.seasonSelect.value : '1'; // Ensure seasonSelect is accessed correctly

            if (movie.type === 'series' && episodeNumber) {
                embedLink = `https://moviekex.online/embed/tv/${movie.imdbID}/${seasonNumber}/${episodeNumber}`;
            } else if (movie.type === 'series') {
                // Default to season 1, episode 1 if playing a series without specific episode
                embedLink = `https://moviekex.online/embed/tv/${movie.imdbID}/${seasonNumber}/1`; 
            } else {
                embedLink = `https://moviekex.online/embed/movie/${movie.imdbID}`;
            }
            
            elements.embedPlayer.innerHTML = `
                <iframe 
                    width="100%" 
                    height="100%" 
                    src="${embedLink}" 
                    frameborder="0" 
                    allowfullscreen
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture">
                </iframe>
            `;
            
            // Add to continue watching and watch history
            addToContinueWatching(movie);
            addToWatchHistory(movie);
            
            // Close the modal when opening video player
            closeModal();
        }

        function closeVideoPlayer() {
            const videoPlayerOverlay = elements.videoPlayer; // Use elements object
            videoPlayerOverlay.style.opacity = '0';
            videoPlayerOverlay.style.visibility = 'hidden';
            document.body.style.overflow = '';
            
            // Clear the embed
            elements.embedPlayer.innerHTML = '';
        }

        function showAdblockWarning() {
            const warning = document.getElementById('adblockWarning');
            if (warning) {
                warning.style.display = 'block';
                setTimeout(() => {
                    warning.style.display = 'none';
                }, 5000); // Auto-dismiss after 5 seconds
            }
        }

        function dismissAdblockWarning() {
            const warning = document.getElementById('adblockWarning');
            if (warning) {
                warning.style.display = 'none';
            }
        }

        // Local Storage Functions
        function getLikedMovies() {
            const likes = localStorage.getItem(STORAGE_KEYS.likes);
            return likes ? JSON.parse(likes) : [];
        }

        function getDislikedMovies() {
            const dislikes = localStorage.getItem(STORAGE_KEYS.dislikes);
            return dislikes ? JSON.parse(dislikes) : [];
        }

        function getWatchLaterMovies() {
            const watchLater = localStorage.getItem(STORAGE_KEYS.watchLater);
            return watchLater ? JSON.parse(watchLater) : [];
        }

        function getContinueWatchingData() {
            const continueWatching = localStorage.getItem(STORAGE_KEYS.continueWatching);
            return continueWatching ? JSON.parse(continueWatching) : {};
        }

        function getWatchHistoryData() {
            const watchHistory = localStorage.getItem(STORAGE_KEYS.watchHistory);
            return watchHistory ? JSON.parse(watchHistory) : {};
        }

        function addToWatchHistory(movie) {
            const watchHistory = getWatchHistoryData();
            watchHistory[movie.id] = {
                movie: movie,
                timestamp: Date.now()
            };
            localStorage.setItem(STORAGE_KEYS.watchHistory, JSON.stringify(watchHistory));
        }

        function toggleLike(movie) {
            const likes = getLikedMovies();
            const dislikes = getDislikedMovies();
            
            if (likes.includes(movie.id)) {
                // Remove from likes
                const updatedLikes = likes.filter(id => id !== movie.id);
                localStorage.setItem(STORAGE_KEYS.likes, JSON.stringify(updatedLikes));
            } else {
                // Add to likes and remove from dislikes if present
                const updatedLikes = [...likes, movie.id];
                const updatedDislikes = dislikes.filter(id => id !== movie.id);
                localStorage.setItem(STORAGE_KEYS.likes, JSON.stringify(updatedLikes));
                localStorage.setItem(STORAGE_KEYS.dislikes, JSON.stringify(updatedDislikes));
            }
            
            updateActionButtons(movie);
        }

        function toggleDislike(movie) {
            const likes = getLikedMovies();
            const dislikes = getDislikedMovies();
            
            if (dislikes.includes(movie.id)) {
                // Remove from dislikes
                const updatedDislikes = dislikes.filter(id => id !== movie.id);
                localStorage.setItem(STORAGE_KEYS.dislikes, JSON.stringify(updatedDislikes));
            } else {
                // Add to dislikes and remove from likes if present
                const updatedDislikes = [...dislikes, movie.id];
                const updatedLikes = likes.filter(id => id !== movie.id);
                localStorage.setItem(STORAGE_KEYS.dislikes, JSON.stringify(updatedDislikes));
                localStorage.setItem(STORAGE_KEYS.likes, JSON.stringify(updatedLikes));
            }
            
            updateActionButtons(movie);
        }

        function toggleWatchLater(movie) {
            const watchLater = getWatchLaterMovies();
            
            if (watchLater.some(m => m.id === movie.id)) {
                // Remove from watch later
                const updatedWatchLater = watchLater.filter(m => m.id !== movie.id);
                localStorage.setItem(STORAGE_KEYS.watchLater, JSON.stringify(updatedWatchLater));
            } else {
                // Add to watch later
                const updatedWatchLater = [...watchLater, movie];
                localStorage.setItem(STORAGE_KEYS.watchLater, JSON.stringify(updatedWatchLater));
            }
            
            updateActionButtons(movie);
            // No longer updating homepage 'Watch Later' section, as it's removed.
        }

        function addToContinueWatching(movie) {
            const continueWatching = getContinueWatchingData();
            continueWatching[movie.id] = {
                movie: movie,
                timestamp: Date.now(),
                progress: 0
            };
            localStorage.setItem(STORAGE_KEYS.continueWatching, JSON.stringify(continueWatching));
            updateContinueWatchingSection();
        }

        function updateContinueWatchingProgress(movieId, progress) {
            const continueWatching = getContinueWatchingData();
            if (continueWatching[movieId]) {
                continueWatching[movieId].progress = progress;
                continueWatching[movieId].timestamp = Date.now();
                localStorage.setItem(STORAGE_KEYS.continueWatching, JSON.stringify(continueWatching));
            }
        }

        function updateContinueWatchingSection() {
            const continueWatchingData = getContinueWatchingData();
            const continueWatchingMovies = Object.values(continueWatchingData)
                .sort((a, b) => b.timestamp - a.timestamp)
                .slice(0, 10)
                .map(item => item.movie);
            
            if (continueWatchingMovies.length > 0) {
                elements.continueWatchingSection.style.display = 'block';
                populateMovieRow(elements.continueWatchingRow, continueWatchingMovies);
            } else {
                elements.continueWatchingSection.style.display = 'none';
            }
        }

        // Page Functions
        function openMyFavorites() {
            const likes = getLikedMovies();
            const allMoviesFlat = [...movieData.trending, ...movieData.topRated, ...movieData.recentlyAdded];
            const favoriteMovies = allMoviesFlat.filter(movie => likes.includes(movie.id));
            
            populateMoviesGrid(elements.favoritesGrid, favoriteMovies, 'No favorites yet', 'Start liking movies to see them here!');
            elements.myFavoritesPage.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function openWatchLater() {
            const watchLaterMovies = getWatchLaterMovies();
            populateMoviesGrid(elements.watchLaterGrid, watchLaterMovies, 'No movies saved for later', 'Save movies to watch them later!');
            elements.watchLaterPage.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function openWatchHistory() {
            const historyData = getWatchHistoryData();
            const historyMovies = Object.values(historyData)
                .sort((a, b) => b.timestamp - a.timestamp)
                .map(item => ({
                    ...item.movie,
                    watchedAt: new Date(item.timestamp).toLocaleDateString()
                }));
            
            populateMoviesGrid(elements.historyGrid, historyMovies, 'No watch history', 'Movies you watch will appear here!');
            elements.watchHistoryPage.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closePage() {
            document.querySelectorAll('.page-overlay').forEach(page => {
                page.classList.remove('active');
            });
            document.body.style.overflow = '';
        }

        function populateMoviesGrid(container, movies, emptyTitle, emptyMessage) {
            container.innerHTML = '';
            
            if (movies.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-film"></i>
                        <h3>${emptyTitle}</h3>
                        <p>${emptyMessage}</p>
                    </div>
                `;
                return;
            }
            
            movies.forEach(movie => {
                const movieCard = createMovieCard(movie);
                container.appendChild(movieCard);
            });
        }

        // Touch support for mobile
        let startX = 0;
        let isScrolling = false;

        document.addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
        }, { passive: true });

        document.addEventListener('touchmove', (e) => {
            if (!startX) return;
            
            const currentX = e.touches[0].clientX;
            const diffX = startX - currentX;
            
            if (Math.abs(diffX) > 50 && !isScrolling) {
                const movieRows = document.querySelectorAll('.movie-row');
                movieRows.forEach(row => {
                    if (diffX > 0) {
                        row.scrollLeft += 200;
                    } else {
                        row.scrollLeft -= 200;
                    }
                });
            }
        }, { passive: true });

        document.addEventListener('touchend', () => {
            startX = 0;
            isScrolling = false;
        }, { passive: true });

        async function selectSearchResult(item) {
            try {
                // Fetch detailed information from OMDb
                const response = await fetch(`${OMDB_BASE_URL}?i=${item.imdbID}&apikey=${OMDB_API_KEY}`);
                const details = await response.json();
                
                if (details.Response === 'True') {
                    const movie = {
                        id: item.imdbID,
                        title: details.Title,
                        year: details.Year,
                        rating: details.imdbRating !== 'N/A' ? parseFloat(details.imdbRating) / 2 : 4.0,
                        views: `${Math.floor(Math.random() * 10) + 1}.${Math.floor(Math.random() * 10)}M`,
                        description: details.Plot !== 'N/A' ? details.Plot : 'No description available.',
                        poster: details.Poster !== 'N/A' ? details.Poster : 'no-image-thumbnail.png',
                        imdbID: item.imdbID,
                        type: item.Type || 'movie',
                        genre: details.Genre || 'Unknown'
                    };
                    
                    // Close search and open movie modal
                    toggleSearch();
                    openMovieModal(movie);
                } else {
                    console.error('Failed to fetch movie details');
                }
            } catch (error) {
                console.error('Error selecting search result:', error);
            }
        }
        
        function openStatusPage() {
            const now = new Date();
            elements.statusLastUpdated.textContent = now.toLocaleString();
            elements.statusPage.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function openAboutPage() {
            elements.aboutPage.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function copyDiscord() {
            const discordId = "1395993370245206129"; // Replace with actual Discord ID
            navigator.clipboard.writeText(discordId).then(() => {
                alert(`Discord ID "${discordId}" copied to clipboard!`);
            }).catch(err => {
                console.error('Failed to copy Discord ID: ', err);
                prompt('Copy this Discord ID:', discordId);
            });
        }
    </script>
</body>
</html>